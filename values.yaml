imagePullSecrets:
  - name: ghcr-secret
namespace: "team13-ns"
ingress:
  enabled: true
  className: "nginx"
  host: "team-13.kubepractice.ru"
  tls:
    secretName: "team13-tls"
auth:
  image:
    repository: ghcr.io/csu-itmo-2025-2/team13-auth
    pullPolicy: Always
    tag: "sha-2022fe7"
  port: 5002
  algorithm: "HS256"
  baseUrl: "http://auth-service:5002"
bff:
  image:
    repository: ghcr.io/csu-itmo-2025-2/team13-bff
    pullPolicy: Always
    tag: "sha-2a4c955"
  port: 8000
habr:
  image:
    repository: ghcr.io/csu-itmo-2025-2/team13-habr
    pullPolicy: Always
    tag: "sha-a043c5b"
  port: 5000
  baseUrl: "http://habr-adapter:5000"
llm:
  image:
    repository: ghcr.io/csu-itmo-2025-2/team13-llm
    pullPolicy: Always
    tag: "sha-adb90ed"
  port: 5001
  baseUrl: "http://llm-service:5001"
rabbitmq:
  image: rabbitmq:3.12-management
  user: "user"
  host: "rabbitmq"
  queueName: "article_queue"
  port: 5672
  uiPort: 15672
  probes:
    startup:
      initialDelaySeconds: 60
      periodSeconds: 60
      timeoutSeconds: 30
      failureThreshold: 30
    readiness:
      initialDelaySeconds: 20
      periodSeconds: 60
      timeoutSeconds: 30
      failureThreshold: 3
    liveness:
      initialDelaySeconds: 60
      periodSeconds: 60
      timeoutSeconds: 30
      failureThreshold: 3
redis:
  image: redis:7-alpine
  host: "redis"
  port: 6379
postgres:
  host: "79.174.89.43"
  port: "18809"
  dbName: "team13_db"
  user: "team13"
keda:
  enabled: true
  llmConsumer:
    minReplicas: 1
    maxReplicas: 10
    queueLength: "5" # Scale up when queue has more than 5 messages per replica
    pollingInterval: 10
    cooldownPeriod: 30
  habr:
    minReplicas: 1
    maxReplicas: 5
    cpuThreshold: "70" # Scale up when CPU usage exceeds 70%
    memoryThreshold: "80" # Scale up when memory usage exceeds 80%
    pollingInterval: 10
    cooldownPeriod: 30
probes:
  http:
    healthPath: "/health" # Health check endpoint path
    startup:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 30
    readiness:
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
  exec:
    startup:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 30
    readiness:
      initialDelaySeconds: 5
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
podDisruptionBudget:
  enabled: true
  auth:
    enabled: true
    minAvailable: 1
  bff:
    enabled: true
    minAvailable: 1
  habr:
    enabled: true
    minAvailable: 1
  llm:
    enabled: true
    minAvailable: 1
  llmConsumer:
    enabled: true
    minAvailable: 1
  rabbitmq:
    enabled: true
    minAvailable: 1
  redis:
    enabled: true
    minAvailable: 1
